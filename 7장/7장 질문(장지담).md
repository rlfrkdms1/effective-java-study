# ITEM43
> 260p 때론 람다가 메서드 참조보다 간결할 때가 있다. 주로 메서드와 람다가 같은 클래스에 있을 때 그렇다.

책에서는 메서드와 람다가 같은 클래스에 있을 때의 예시로 `service.execuite(GoshThisClassNameIsHumongous::action);`를 듭니다.  메서드와 람다가 다른 클래스에 있는 예시로는 앞에서`map.merge(key,1,Integer::sum);`를 들었습니다. 
두 예시 모두 `클래스명::메서드명` 으로 메서드 참조를 전달하고 있는데 왜 메서드와 람다가 같은 클래스에 있을 때 만 문제삼는 것인지 이해가 잘 가지 않습니다

## Answer

음, 책에서는 **주로 메서드와 람다가 같은 클래스에 있을 때 그렇다.** 라고 했지, 앞에서 나온 `map.merge(key,1,Integer::sum);`과 `service.execuite(GoshThisClassNameIsHumongous::action);`를 이 예시로 든 것이라곤 생각되지 않습니다. 분리해서 생각하면 좋을 것 같고, 중요 요점은 **람다가 메서드 참조보다 간결할 때**라는 것에 초점을 맞추면 될 것 같습니다. 

> 261p 즉, 함수 객체가 받는 인수와 참조되는 메서드가 받는 인수가 똑같다.

이해가 잘 안갑니다. ㅜㅜ , 함수 객체는 함수형 인터페이스의 객체인데, 원래 람다로 함수 객체를 만들다가 메서드 참조가 더 단순하니까 대신한다는 거 아닌가요?? 그럼 함수 객체랑 참조되는 메서드랑 같은 거 아닌가요..??

## Answer

책의 예제에서 한정적 인스턴스는 `Instant.now()::isAfter`의 형태로 사용됩니다. 이를 람다로 나타낸 식을 보면 사실상 이해가 더 쉬울 것 같은데요. 람다의 형태는 아래와 같습니다. 
```java
Instant then = Instant.now();
t -> then.isAfter(t);
```
인자 t가 그대로 인스턴스 메서의 인수로 들어가는 것을 볼 수 있습니다. 즉, 함수 객체의 매개변수가 인스턴스 메서드의 인수로 동일하게 들어가는 것입니다. 하지만 비한정적 인스턴스에서는 다릅니다. 

```java
String::toLowerCase
str -> str.toLowerCase()
```
인수로 받은 str이 참조 메서드의 인자로 들어가지 않는 것을 확인할 수 있습니다. 


# ITEM45
> 268p 스트림 파이프라인은 지연 평가 된다. 평가는 종단 연산이 호출될 떄 이뤄지며, ~~ 이러한 지연 평가가 무한 스트림을 다룰 수 있게 해주는 열쇠다. 

평가한다는게 무슨 뜻인가요? 그리고 지연 평가와 무한 스트림이 무슨 상관인가요 ?

## Answer

지연 평가란, 지연 연산이라고 생각해주시면 되겠습니다. 
지연 연산이란 간단히 말해 결과값이 필요할 때까지 계산을 늦추는 기법입니다.

>스트림 파이프라인을 실행하게 되면 JVM은 곧바로 스트림 연산을 실행시키지 않는다. 그 대신 최소한의 필수적인 작업만을 수행하고자, 즉 지연 연산을 위한 준비작업을 수행한다. 이 준비 작업이란 우선 스트림 파이프라인이 어떠한 중간연산과 최종연산으로 구성되어있는지에 대한 검사로 시작된다. 이러한 검사 결과를 바탕으로 JVM은 사전에 어떠한 방식으로 최적화를 진행할지 미리 계획하고, 그 계획에 따라 스트림의 개별 요소에 대한 스트림 연산을 수행하게 된다.

출처: [[Java] 스트림: 지연 연산과 최적화](https://bugoverdose.github.io/development/stream-lazy-evaluation/)
Copyright © Jinwoo's Blog

---

스트림과 반복문 중 써보고 더 나은것을 고르라고 하고, 개인의 취향이라고도 하고, 적절히 섞어쓰라고 하는데요, 가은님은 대부분 상황에서 반복문보다는 스트림을 선호하시는거 같아서요. 그 이유가 뭔지 궁금합니다. 가독성이 좋다고도 하셨었는데 스트림을 쓰면 어떤 부분에서 가독성이 좋다고 느끼시나요? 또 다른 이유가 있을까요?

## Answer

음, 사실 이 부분에대해서는 지담님께 얘기를 드렸던 것 같아요. 지담님이 stream을 아예 사용하시지 않는 것을 보고 stream에 익숙해지면 좋겠다고 생각해서 많이 쓰라고 말씀드린 것도 있고, 지담님께 스트림을 사용하라는 상황에서는 모두 지담님 코드와 스트림을 썼을 때의 상황을 생각해보고 추천을 드렸습니다.


또한 지담님 말씀대로 제가 반복문 보다는 스트림을 지향하는 건 맞는 것 같습니다. 프로젝트에서 사실상 반복문을 돌릴 때는 List나 Map등의 자료구조를 순회할 때 이고, 이때 index는 사실상 무의미하다고 생각해요. 하지만 for문의 경우 index로 순회를 돌고 향상된 for문을 쓰는 것보단 stream이 가독성 부분에서나 여러가지 filtering, collecting등이 가능해 더 유용하고 가독성있다고 여겨졌어요. 


저도 stream을 쓰다가 과용한다고 생각이 들면 반복문도 섞어서 쓰곤 합니다. stream이 너무 길어지면 저도 이해하기 어렵고 제대로된 결과값이 나오리란 확신이 안서기 때문인 것 같습니다. 
음, 그리고 저번에 말씀드렸다시피 코딩테스트 문제를 풀때는 성능상 for문을 쓰고 있습니다. 여러가지 상황에 맞게 사용하는게 좋을 것 같아요.
